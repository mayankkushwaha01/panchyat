<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Projects - Panchayat E-Governance</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../static/css/style.css">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card { border: none; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); }
        .container { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 2rem; margin-top: 1rem; }
        .btn { border-radius: 25px; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); }
        .stat-card { background: linear-gradient(135deg, #11998e, #38ef7d); }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html"><i class="fas fa-landmark"></i> Gram Panchayat Portal</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="schemes.html">Schemes</a></li>
            <li class="nav-item">
              <a class="nav-link" href="grievance_form.html">File Grievance</a>
            </li>
            <li class="nav-item"><a class="nav-link active" href="projects.html">Projects</a></li>
            <li class="nav-item"><a class="nav-link" href="#" >Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container mt-4">
        <div class="row mb-4">
            <div class="col-12">
                <h2><i class="fas fa-tasks me-2"></i>All Projects</h2>
                <p class="text-muted">Track the progress of ongoing and completed development projects in our Gram Panchayat.</p>
            </div>
        </div>

        <!-- Project Statistics -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card stat-card text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-play-circle fa-2x mb-2"></i>
                        <h4 id="ongoing-count">0</h4>
                        <p>Ongoing Projects</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-check-circle fa-2x mb-2"></i>
                        <h4 id="completed-count">0</h4>
                        <p>Completed Projects</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-rupee-sign fa-2x mb-2"></i>
                        <h4 id="total-budget">â‚¹0</h4>
                        <p>Total Budget</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-clock fa-2x mb-2"></i>
                        <h4 id="avg-progress">0%</h4>
                        <p>Average Progress</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter Options -->
        <div class="row mb-4">
            <div class="col-md-6">
                <select id="status-filter" class="form-select">
                    <option value="all">All Projects</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Completed">Completed</option>
                    <option value="Planned">Planned</option>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" id="search-projects" class="form-control" placeholder="Search projects...">
            </div>
        </div>

        <!-- Projects Container -->
        <div class="row" id="projects-container">
            <!-- Projects will be loaded here -->
        </div>
    </main>

    <footer class="text-center mt-5 py-4 bg-light border-top">
        <p>&copy; 2024 Your Gram Panchayat. All Rights Reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .milestone {
            position: relative;
            margin-bottom: 20px;
            padding-left: 40px;
        }
        .milestone-icon {
            position: absolute;
            left: -35px;
            top: 0;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        .milestone.completed .milestone-icon {
            background-color: #28a745;
            color: white;
        }
        .milestone.in-progress .milestone-icon {
            background-color: #007bff;
            color: white;
        }
        .milestone.pending .milestone-icon {
            background-color: #ffc107;
            color: #212529;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #dee2e6;
        }
    </style>
    <script>
        const API_KEY = 'AIzaSyDTSfWZzXV8Gctr-nykMTAsw3Qodf94wwE';
        
        // Detailed projects data
        const projects = [
            {
                "id": "1",
                "name": "Village Road Construction Project",
                "description": "Construction of 5km concrete road connecting outer villages (Rampur, Shivpur, Krishnanagar) to main highway with proper drainage system",
                "budget": 2500000,
                "allocated": 2500000,
                "spent": 1875000,
                "start_date": "2024-01-15",
                "end_date": "2024-06-30",
                "status": "In Progress",
                "completion": 75,
                "contractor": "ABC Construction Ltd.",
                "supervisor": "Eng. Rajesh Kumar",
                "beneficiaries": 1200,
                "category": "Infrastructure",
                "scheme": "PMGSY (Pradhan Mantri Gram Sadak Yojana)",
                "milestones": [
                    {"task": "Site Survey & Planning", "status": "Completed", "date": "2024-01-30"},
                    {"task": "Foundation Work", "status": "Completed", "date": "2024-03-15"},
                    {"task": "Road Construction (3km)", "status": "Completed", "date": "2024-04-30"},
                    {"task": "Drainage System", "status": "In Progress", "date": "2024-05-30"},
                    {"task": "Final Inspection", "status": "Pending", "date": "2024-06-25"}
                ]
            },
            {
                "id": "2",
                "name": "Community Water Purification System",
                "description": "Installation of RO water purification plants in 5 strategic locations with solar power backup and regular maintenance facility",
                "budget": 1200000,
                "allocated": 1200000,
                "spent": 540000,
                "start_date": "2024-02-10",
                "end_date": "2024-04-30",
                "status": "In Progress",
                "completion": 45,
                "contractor": "AquaTech Solutions",
                "supervisor": "Dr. Priya Sharma",
                "beneficiaries": 2500,
                "category": "Water & Sanitation",
                "scheme": "Jal Jeevan Mission",
                "milestones": [
                    {"task": "Site Identification", "status": "Completed", "date": "2024-02-20"},
                    {"task": "Equipment Procurement", "status": "Completed", "date": "2024-03-10"},
                    {"task": "Installation (3/5 sites)", "status": "In Progress", "date": "2024-04-15"},
                    {"task": "Testing & Commissioning", "status": "Pending", "date": "2024-04-25"}
                ]
            },
            {
                "id": "3",
                "name": "Solar Street Lighting Project",
                "description": "Installation of 150 solar-powered LED street lights along main roads, market area, and school premises with motion sensors",
                "budget": 800000,
                "allocated": 800000,
                "spent": 800000,
                "start_date": "2023-11-01",
                "end_date": "2024-01-31",
                "status": "Completed",
                "completion": 100,
                "contractor": "Green Energy Systems",
                "supervisor": "Eng. Amit Patel",
                "beneficiaries": 3000,
                "category": "Energy",
                "scheme": "Solar Mission",
                "milestones": [
                    {"task": "Survey & Design", "status": "Completed", "date": "2023-11-15"},
                    {"task": "Material Procurement", "status": "Completed", "date": "2023-12-10"},
                    {"task": "Installation (150 lights)", "status": "Completed", "date": "2024-01-20"},
                    {"task": "Testing & Handover", "status": "Completed", "date": "2024-01-31"}
                ]
            },
            {
                "id": "4",
                "name": "Primary Health Center Modernization",
                "description": "Complete renovation of PHC building, installation of modern medical equipment, digital health records system, and telemedicine facility",
                "budget": 1800000,
                "allocated": 1800000,
                "spent": 450000,
                "start_date": "2024-03-01",
                "end_date": "2024-08-31",
                "status": "In Progress",
                "completion": 25,
                "contractor": "MediBuild Infrastructure",
                "supervisor": "Dr. Sunita Verma",
                "beneficiaries": 5000,
                "category": "Healthcare",
                "scheme": "Ayushman Bharat",
                "milestones": [
                    {"task": "Building Assessment", "status": "Completed", "date": "2024-03-15"},
                    {"task": "Structural Repairs", "status": "In Progress", "date": "2024-05-15"},
                    {"task": "Equipment Installation", "status": "Pending", "date": "2024-07-15"},
                    {"task": "Staff Training", "status": "Pending", "date": "2024-08-15"}
                ]
            },
            {
                "id": "5",
                "name": "Digital Literacy & Skill Development Center",
                "description": "Establishment of computer training center with 20 workstations, internet connectivity, and vocational training programs for youth and women",
                "budget": 600000,
                "allocated": 600000,
                "spent": 0,
                "start_date": "2024-04-15",
                "end_date": "2024-07-15",
                "status": "Planned",
                "completion": 0,
                "contractor": "EduTech Solutions",
                "supervisor": "Prof. Meera Singh",
                "beneficiaries": 500,
                "category": "Education",
                "scheme": "Digital India",
                "milestones": [
                    {"task": "Space Allocation", "status": "Pending", "date": "2024-04-20"},
                    {"task": "Infrastructure Setup", "status": "Pending", "date": "2024-05-30"},
                    {"task": "Equipment Installation", "status": "Pending", "date": "2024-06-30"},
                    {"task": "Training Program Launch", "status": "Pending", "date": "2024-07-15"}
                ]
            },
            {
                "id": "6",
                "name": "Integrated Waste Management System",
                "description": "Implementation of door-to-door waste collection, segregation facility, composting unit, and biogas plant for organic waste processing",
                "budget": 950000,
                "allocated": 950000,
                "spent": 950000,
                "start_date": "2023-09-01",
                "end_date": "2024-02-28",
                "status": "Completed",
                "completion": 100,
                "contractor": "EcoWaste Management",
                "supervisor": "Env. Eng. Ravi Gupta",
                "beneficiaries": 2800,
                "category": "Environment",
                "scheme": "Swachh Bharat Mission",
                "milestones": [
                    {"task": "Waste Audit", "status": "Completed", "date": "2023-09-15"},
                    {"task": "Collection System Setup", "status": "Completed", "date": "2023-11-30"},
                    {"task": "Composting Unit", "status": "Completed", "date": "2024-01-15"},
                    {"task": "Community Training", "status": "Completed", "date": "2024-02-28"}
                ]
            },
            {
                "id": "7",
                "name": "Government School Infrastructure Development",
                "description": "Construction of 4 new classrooms, library, computer lab, playground development, and installation of smart boards in existing classrooms",
                "budget": 2200000,
                "allocated": 2200000,
                "spent": 1320000,
                "start_date": "2024-01-20",
                "end_date": "2024-09-30",
                "status": "In Progress",
                "completion": 60,
                "contractor": "Shiksha Infrastructure Ltd.",
                "supervisor": "Arch. Kavita Joshi",
                "beneficiaries": 800,
                "category": "Education",
                "scheme": "Samagra Shiksha",
                "milestones": [
                    {"task": "Foundation & Structure", "status": "Completed", "date": "2024-03-30"},
                    {"task": "Roofing & Walls", "status": "Completed", "date": "2024-05-15"},
                    {"task": "Interior Work", "status": "In Progress", "date": "2024-07-30"},
                    {"task": "Equipment Installation", "status": "Pending", "date": "2024-09-15"}
                ]
            },
            {
                "id": "8",
                "name": "Irrigation Canal Modernization",
                "description": "Repair and lining of 3km main irrigation canal, installation of automated gates, water level monitoring system, and farmer training program",
                "budget": 1500000,
                "allocated": 1500000,
                "spent": 1200000,
                "start_date": "2024-02-01",
                "end_date": "2024-05-31",
                "status": "In Progress",
                "completion": 80,
                "contractor": "Irrigation Solutions Pvt. Ltd.",
                "supervisor": "Eng. Suresh Yadav",
                "beneficiaries": 600,
                "category": "Agriculture",
                "scheme": "PMKSY (Pradhan Mantri Krishi Sinchai Yojana)",
                "milestones": [
                    {"task": "Canal Cleaning", "status": "Completed", "date": "2024-02-28"},
                    {"task": "Concrete Lining (2.5km)", "status": "Completed", "date": "2024-04-15"},
                    {"task": "Gate Installation", "status": "In Progress", "date": "2024-05-15"},
                    {"task": "System Testing", "status": "Pending", "date": "2024-05-31"}
                ]
            },
            {
                "id": "9",
                "name": "Women Self-Help Group Training Center",
                "description": "Construction of multipurpose training center for SHG activities, skill development workshops, and microfinance meetings with modern facilities",
                "budget": 750000,
                "allocated": 750000,
                "spent": 225000,
                "start_date": "2024-03-10",
                "end_date": "2024-07-31",
                "status": "In Progress",
                "completion": 30,
                "contractor": "Community Builders",
                "supervisor": "Social Worker Anita Devi",
                "beneficiaries": 400,
                "category": "Social Development",
                "scheme": "DAY-NRLM",
                "milestones": [
                    {"task": "Site Preparation", "status": "Completed", "date": "2024-03-25"},
                    {"task": "Foundation Work", "status": "In Progress", "date": "2024-05-10"},
                    {"task": "Building Construction", "status": "Pending", "date": "2024-06-30"},
                    {"task": "Interior & Equipment", "status": "Pending", "date": "2024-07-31"}
                ]
            },
            {
                "id": "10",
                "name": "Community Park & Recreation Center",
                "description": "Development of 2-acre community park with children's play area, walking track, outdoor gym, and cultural activity pavilion",
                "budget": 1100000,
                "allocated": 1100000,
                "spent": 1100000,
                "start_date": "2023-10-01",
                "end_date": "2024-03-31",
                "status": "Completed",
                "completion": 100,
                "contractor": "Green Spaces Ltd.",
                "supervisor": "Landscape Arch. Rohit Sharma",
                "beneficiaries": 3500,
                "category": "Recreation",
                "scheme": "MPLADS",
                "milestones": [
                    {"task": "Land Development", "status": "Completed", "date": "2023-11-30"},
                    {"task": "Landscaping", "status": "Completed", "date": "2024-01-31"},
                    {"task": "Equipment Installation", "status": "Completed", "date": "2024-02-28"},
                    {"task": "Inauguration", "status": "Completed", "date": "2024-03-31"}
                ]
            }
        ];

        let filteredProjects = [...projects];

        document.addEventListener('DOMContentLoaded', function() {
            renderProjects(projects);
            updateStatistics(projects);
            setupFilters();
        });

        function renderProjects(projectList) {
            const container = document.getElementById('projects-container');
            container.innerHTML = '';

            projectList.forEach(project => {
                const statusColor = getStatusColor(project.status);
                const progressColor = getProgressColor(project.completion);
                
                const projectCard = document.createElement('div');
                projectCard.className = 'col-lg-6 mb-4';
                projectCard.innerHTML = `
                    <div class="card h-100 shadow-sm">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0 text-primary">${project.name}</h5>
                            <span class="badge ${statusColor}">${project.status}</span>
                        </div>
                        <div class="card-body">
                            <p class="card-text text-muted mb-3">${project.description}</p>
                            
                            <!-- Project Details -->
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-user-tie me-1"></i>Contractor</small>
                                    <div class="fw-bold">${project.contractor}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-users me-1"></i>Beneficiaries</small>
                                    <div class="fw-bold">${project.beneficiaries.toLocaleString()}</div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-tag me-1"></i>Category</small>
                                    <div class="fw-bold">${project.category}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-clipboard-list me-1"></i>Scheme</small>
                                    <div class="fw-bold">${project.scheme}</div>
                                </div>
                            </div>
                            
                            <!-- Progress Bar -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <small><i class="fas fa-chart-line me-1"></i>Progress</small>
                                    <small class="fw-bold">${project.completion}%</small>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar ${progressColor}" role="progressbar" 
                                         style="width: ${project.completion}%" 
                                         aria-valuenow="${project.completion}" 
                                         aria-valuemin="0" aria-valuemax="100">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Budget Information -->
                            <div class="row mb-3">
                                <div class="col-4 text-center">
                                    <small class="text-muted">Total Budget</small>
                                    <div class="fw-bold text-primary">â‚¹${(project.budget / 100000).toFixed(1)}L</div>
                                </div>
                                <div class="col-4 text-center">
                                    <small class="text-muted">Spent</small>
                                    <div class="fw-bold text-success">â‚¹${(project.spent / 100000).toFixed(1)}L</div>
                                </div>
                                <div class="col-4 text-center">
                                    <small class="text-muted">Remaining</small>
                                    <div class="fw-bold text-warning">â‚¹${((project.budget - project.spent) / 100000).toFixed(1)}L</div>
                                </div>
                            </div>
                            
                            <!-- Timeline -->
                            <div class="row mb-3">
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-calendar-alt me-1"></i>Start Date</small>
                                    <div class="fw-bold">${formatDate(project.start_date)}</div>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted"><i class="fas fa-calendar-check me-1"></i>End Date</small>
                                    <div class="fw-bold">${formatDate(project.end_date)}</div>
                                </div>
                            </div>
                            
                            <!-- Latest Milestone -->
                            <div class="mb-3">
                                <small class="text-muted"><i class="fas fa-tasks me-1"></i>Current Milestone</small>
                                <div class="fw-bold">${getCurrentMilestone(project.milestones)}</div>
                            </div>
                            
                            <!-- Action Button -->
                            <div class="text-center">
                                <button class="btn btn-outline-primary btn-sm" onclick="showProjectDetails('${project.id}')">
                                    <i class="fas fa-eye me-1"></i>View Details
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(projectCard);
            });
        }

        function updateStatistics(projectList) {
            const ongoing = projectList.filter(p => p.status === 'In Progress').length;
            const completed = projectList.filter(p => p.status === 'Completed').length;
            const totalBudget = projectList.reduce((sum, p) => sum + p.budget, 0);
            const avgProgress = Math.round(projectList.reduce((sum, p) => sum + p.completion, 0) / projectList.length);

            document.getElementById('ongoing-count').textContent = ongoing;
            document.getElementById('completed-count').textContent = completed;
            document.getElementById('total-budget').textContent = `â‚¹${(totalBudget / 10000000).toFixed(1)}Cr`;
            document.getElementById('avg-progress').textContent = `${avgProgress}%`;
        }

        function setupFilters() {
            const statusFilter = document.getElementById('status-filter');
            const searchInput = document.getElementById('search-projects');

            statusFilter.addEventListener('change', filterProjects);
            searchInput.addEventListener('input', filterProjects);
        }

        function filterProjects() {
            const statusFilter = document.getElementById('status-filter').value;
            const searchTerm = document.getElementById('search-projects').value.toLowerCase();

            filteredProjects = projects.filter(project => {
                const matchesStatus = statusFilter === 'all' || project.status === statusFilter;
                const matchesSearch = project.name.toLowerCase().includes(searchTerm) || 
                                    project.description.toLowerCase().includes(searchTerm);
                return matchesStatus && matchesSearch;
            });

            renderProjects(filteredProjects);
        }

        function getStatusColor(status) {
            switch(status) {
                case 'Completed': return 'bg-success';
                case 'In Progress': return 'bg-primary';
                case 'Planned': return 'bg-warning';
                default: return 'bg-secondary';
            }
        }

        function getProgressColor(completion) {
            if (completion >= 80) return 'bg-success';
            if (completion >= 50) return 'bg-info';
            if (completion >= 25) return 'bg-warning';
            return 'bg-danger';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-IN', { 
                day: '2-digit', 
                month: 'short', 
                year: 'numeric' 
            });
        }

        function getCurrentMilestone(milestones) {
            const inProgress = milestones.find(m => m.status === 'In Progress');
            if (inProgress) return inProgress.task;
            
            const pending = milestones.find(m => m.status === 'Pending');
            if (pending) return pending.task;
            
            return 'All milestones completed';
        }

        function showProjectDetails(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;
            
            const modalContent = `
                <div class="modal fade" id="projectModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${project.name}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row mb-3">
                                    <div class="col-12">
                                        <h6>Project Description</h6>
                                        <p>${project.description}</p>
                                    </div>
                                </div>
                                
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <h6>Project Details</h6>
                                        <ul class="list-unstyled">
                                            <li><strong>Contractor:</strong> ${project.contractor}</li>
                                            <li><strong>Supervisor:</strong> ${project.supervisor}</li>
                                            <li><strong>Category:</strong> ${project.category}</li>
                                            <li><strong>Scheme:</strong> ${project.scheme}</li>
                                            <li><strong>Beneficiaries:</strong> ${project.beneficiaries.toLocaleString()}</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Financial Details</h6>
                                        <ul class="list-unstyled">
                                            <li><strong>Total Budget:</strong> â‚¹${(project.budget / 100000).toFixed(2)} Lakhs</li>
                                            <li><strong>Amount Spent:</strong> â‚¹${(project.spent / 100000).toFixed(2)} Lakhs</li>
                                            <li><strong>Remaining:</strong> â‚¹${((project.budget - project.spent) / 100000).toFixed(2)} Lakhs</li>
                                            <li><strong>Completion:</strong> ${project.completion}%</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <h6>Project Milestones</h6>
                                        <div class="timeline">
                                            ${project.milestones.map(milestone => `
                                                <div class="milestone ${milestone.status.toLowerCase().replace(' ', '-')}">
                                                    <div class="milestone-icon">
                                                        <i class="fas ${getMilestoneIcon(milestone.status)}"></i>
                                                    </div>
                                                    <div class="milestone-content">
                                                        <h6>${milestone.task}</h6>
                                                        <small class="text-muted">${formatDate(milestone.date)}</small>
                                                        <span class="badge ${getMilestoneColor(milestone.status)} ms-2">${milestone.status}</span>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Remove existing modal if any
            const existingModal = document.getElementById('projectModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalContent);
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('projectModal'));
            modal.show();
        }

        function getMilestoneIcon(status) {
            switch(status) {
                case 'Completed': return 'fa-check-circle';
                case 'In Progress': return 'fa-clock';
                case 'Pending': return 'fa-hourglass-half';
                default: return 'fa-circle';
            }
        }

        function getMilestoneColor(status) {
            switch(status) {
                case 'Completed': return 'bg-success';
                case 'In Progress': return 'bg-primary';
                case 'Pending': return 'bg-warning';
                default: return 'bg-secondary';
            }
        }
    </script>
  </body>
</html>